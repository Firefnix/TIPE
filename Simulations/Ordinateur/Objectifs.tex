\documentclass[french]{article}

\usepackage[T1]{fontenc}
\usepackage{babel}
\usepackage{physics} % \bra et \ket
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{mathrsfs}
\usepackage{stmaryrd} % intervalles d'entiers
\usepackage{mleftright} % grandes barres dans les ensembles
\usepackage{tikz-cd} % diagrammes, voir aussi: https://tikzcd.yichuanshen.de/

\newcommand{\p}{\texttt} % Stylisé comme du code.
\newcommand{\somme}{\displaystyle\sum}
\newcommand{\tab}{\hspace*{5mm}}
\newcommand{\floor}[1]{\lfloor #1 \rfloor} % Partie entière

\title{%
    DorEmy \\
    \large Début d'ORdinateur pour EMY-22}
\author{Groupe EMY}


\begin{document}

\maketitle

Dans le cadre du développment du protocole EMY-22 (protocole de transmission quantique de clés cryptographiques), ainsi qu'en vue de l'implémentation de l'algorithme de Grover sur un ordinateur classique, ce projet a pour objectif de constituer une base logicielle aisée d'emploi et permettant de simuler, avec un réalisme (c'est-à-dire un abus) et un temps de calcul raisonnable les bases du calcul quantique.


\section{Unités de mémoire – Qubits}

Un bit est une unité de base de la mémoire qui peut prendre uniquement deux états : $0$ et $1$. Un qubit, ou bit quantique diffère d'un bit car il son état est une combinaison linéaire des deux états de base (ou \textit{vecteurs propres}) du qubit, $\ket{0}$ et $\ket{1}$. Cette combinaison linéaire doit néanmoins respecter la condition de normalisation, si bien que l'ensemble des états possibles d'un qubit est :

\[ E_Q = \{\alpha \ket 0 + \beta \ket 1 \mid \alpha, \beta \in \mathbb{C}, |\alpha|^2 + |\beta|^2 = 1\} \]

Un cas plus général est celui des qudits, qui sont une généralisation des qubits avec $d$ vecteurs propres. Par exemple avec $d = 3$ on aurait les vecteurs propres $\ket 0$, $\ket 1$ et $\ket 2$. L'ensemble des états d'un qudit est :

$$ E_d = \left\{ \somme_{i = 0}^{d - 1} \alpha_i \ket i \middle|\, \forall i \in \llbracket 0, d-1 \rrbracket, \alpha_i \in \mathbb{C},  \somme_{i = 0}^{d - 1} |\alpha_i|^2 = 1\right\} $$

L'état est représenté sous la forme d'une matrice colonne, ce qui facilite l'applications de portes quantiques. Par exemple l'état $\ket \psi = a \ket 0 + b \ket 1$, avec $a, b \in \mathbb{C}$ est assimilé à la matrice $\left(\begin{smallmatrix} a \\ b\end{smallmatrix}\right)$.


\section{Calcul informatique quantique}


Le calcul quantique à proprement parlé sera implémenté dans le module \p{qubit} ainsi que le module \p{portes} et éventuellement le module \p{circuit}.

De manière analogue aux ordinateurs classiques, les ordinateurs quantiques sont basés sur des circuits électroniques. Ces circuits sont entre autres composés de portes logiques, qui agissent sur un petit nombre d'unités de mémoire (comme des qubits) en modifiant leur état. Un circuit est alors définissable comme : une entrée (avec un état initial de la mémoire connu), et un graphe représentant les différentes portes logiques opérant sur la mémoire, dont fait partie la sortie qui présente l'état de la mémoire qui est le résultat des calculs.

\noindent \textbf{\underline{Exemple :}} pour le circuit ci-dessous (où $H$ est la porte de Hadamard et $X$ la porte \p{NOT} ou encore porte de Pauli-X).

\begin{tikzcd}
\text{Entrée 1} \arrow[r] & H \arrow[r]  & \text{Swap} \arrow[d, no head] \arrow[r] & X \arrow[r]                              & \text{Sortie 1} \\
\text{Entrée 2} \arrow[r] & X \arrow[r]  & \text{Swap} \arrow[r]                    & \text{Swap} \arrow[r]                    & \text{Sortie 2} \\
\text{Entrée 3} \arrow[r] & H \arrow[rr] &                                          & \text{Swap} \arrow[u, no head] \arrow[r] & \text{Sortie 3}
\end{tikzcd}


\section{Calcul mathématique}


Dans de nombreuses situations on aura besoin de réaliser des calculs de manière plus poussée que ce que permet nativement Python. Pour cela on implémentera un module, nommé \p{calcul}, dont le rôle sera de réaliser des calculs de manière formelle.

\subsection{Ensembles de travail} \label{ensembles}


Dans la construction des mathématiques par laquelle ce module passera, on admettra la construction des entiers relatifs $\mathbb{Z}$ (néanmoins on détaillera $\mathbb{N}$), et on implémentera quelques ensembles de valeurs :
\begin{itemize}
    \item Les rationnels $\mathbb{Q}$, qu'on assimilera l'ensemble des couples $(p, q) \in \mathbb{Z} \times \mathbb{N}^*$ avec $p$ et $q$ premiers entre eux. On prendra garde à toujours simplifier les rationnels lors des calculs de manière à garder un couple d'entiers avec les bons signes et premiers entre eux.
    \item Les puissances rationnelles de rationnels positifs $\mathbb{P}$. En particulier, $\mathbb{P}$ contient l'ensemble des racines carrées des rationnels, ainsi que $\mathbb{Q}$ lui-même. La multiplication est interne dans $\mathbb{P}$ mais pas l'addition
\end{itemize}

On aura donc des réels que $\mathbb{P} = \{\sigma x^p \mid \sigma \in \{-1, 1\}, x \in \mathbb{Q}^+, p \in \mathbb{Q}\}$. Les complexes seront construits comme des couples : $x + iy$ sera assimilé à $(x, y) \in \mathbb{P}^2$. Le plus grand ensemble de travail est donc $\mathbb{P}[i] = \{x + iy \mid x, y \in \mathbb{P}\}$.

\subsection{Sous-ensemblage}

\subsubsection{Principe}

Une dynamique qu'il sera crucial d'implémenter est le \textbf{sous-ensemblage} : toute variable doit avoir à chaque fin de calcul (même partiel) un type (correspodant à un ensemble) le plus fin possible. Par exemple le calcul $\frac{2}{3} \times \frac{3}{2} = \frac{1}{1}$ doit automatiquement être converti en entier (un sous-ensemble des rationnels, ce qu'il est par ailleurs). On note en particulier les inclusions : $\mathbb{N} \subset \mathbb{Z} \subset \mathbb{Q} \subset \mathbb{P}$.

Le sous-ensemblage est implémenté dans la fonction \p{sous}, qui appelle, sauf si aucune simplification n'est possible, la fonction \p{sous} du sous-type trouvé.
Exemple pour le rationnel $\frac{2}{1} \in \mathbb{Q}$ :
\begin{enumerate}
  \item La fonction \p{sous} des rationnels détecte qu'on peut passer aux entiers relatifs. Elle construit donc un entier relatif correspondant : c'est $2 \in \mathbb{Z}$. On apelle ensuite \p{sous} sur le relatif 2.
  \item Dans \p{sous} de 2, on trouve qu'on peut simplifier au naturel $2 \in \mathbb{N}$
  \item On ne peut pas simplifier plus, donc le \p{sous} de $2 \in \mathbb{N}$ renvoie le même $2 \in \mathbb{N}$.
\end{enumerate}

\subsubsection{Simplification des puissances}

L'ensemble $\mathbb{P}$ étant le plus grand sous-ensemble de $\mathbb{R}$ implémenté, il est important de mettre au point des techniques de simplification des puissances.

Soit $a = \sigma x ^ p \in \mathbb{P}$ une puissance. On a $\sigma \in \{-1, 1\}$ le \textit{signe}, $x = \frac{n_x}{d_x} \in \mathbb{Q}^+$ le \textit{signifiant} et $p = \frac{n_p}{d_p} \in \mathbb{Q}^{+*}$ l'\textit{exposant}.

\begin{enumerate}
  \item Si $p \in \mathbb{Z}$, on calcule $\sigma x ^ p \in \mathbb{Q}$. Si $p \ge 0$ son numérateur non simplifié est $\sigma {n_x}^p$ et son dénominateur non simplifié est ${d_x}^p$. Si $p < 0$ son numérateur non simplifié est $\sigma {d_x}^p$ et son dénominateur non simplifié est ${n_x}^p$.
  \item Sinon, on cherche à savoir si il existe $r = \frac{n_r}{d_r} \in \mathbb{Q}+$ tel que $r^{d_p} = x$. On a alors $x = r^{n_p} \in \mathbb{Q}$.
\end{enumerate}

\noindent \textbf{\underline{Algorithme :}} racine $d_p$-ième exacte d'un rationnel.

\noindent On cherche à déterminer s'il existe un $r \in \mathbb{Q}^+$ tel que $r^{d_p} = x$, et si il existe à déterminer un couple numérateur-dénominateur.

\noindent\texttt{Pour $d_r$ allant de $1$ à $d_x$ \\
\tab Si $\eta = x \cdot {d_r}^{d_p} \in \mathbb{N}$ \\
\tab\tab Si $\exists n_r \in \llbracket 1, \floor{\sqrt{\eta}} \rrbracket$ tel que ${n_r}^{d_p} = \eta$ \\
\tab\tab\tab On renvoie $r = \frac{n_r}{d_r}$ \\
\tab\tab Fin si \\
\tab Fin si \\
Fin pour\\
Il n'existe pas de $r$ qui convient}


\subsection{Sur-ensemblage}

La dynamique inverse existe aussi : on la nomme \textbf{sur-ensemblage}, mis en place dans la fonction \p{sur}. Elle est néanmoins temporaire puisqu'elle n'est utilisée que pour permettre les calculs entre deux types différents.
Exemple pour le calcul $-\frac{1}{2} \times (-2) = 1$ :
\begin{enumerate}
  \item $-2 \not\in \mathbb{Q} \backslash \mathbb{Z} $, on le projette sur l'ensemble $\mathbb{Q}$. On obtient $-\frac{2}{1} \in \mathbb{Q}$.
  \item $-\frac{1}{2}$ et $-\frac{2}{1}$ sont de même type, on peut les muliplier. On obtient $\frac{1}{1} \in \mathbb{Q}$
  \item Fin du calcul : on simplifie en appelant \p{sous} et on obtient finalement $1 \in \mathbb{N}$.
\end{enumerate}

\subsection{Matrices}

Le nombre de lignes d'une matrice \p{m} est \p{m.p} et son nombre de colonnes est \p{m.q}, avec $p, q \in \mathbb{N}$. On peut accéder à $p$ et $q$ en même temps en regardant \p{m.forme}, qui vaut le tuple \p{(p, q)}. Les élements sont accessibles par un couple $(i, j) \in \llbracket 0, p -1 \rrbracket \times \llbracket 0, q -1 \rrbracket$, les indices commençant donc à 0. On aura par exemple \p{m[0, 0]} Pour les matrices lignes et colonnes, il n'est nécessaire que de spécifier l'une des deux coordonnées (l'autre étant forcément 0). On aura dans ce cas \p{m[2]} par exemple.

Les éléments d'une matrice ne sont jamais des \p{int}, des \p{float} et encore moins des \p{str} : tous les coefficients sont des nombres formellements stockés (voir \ref{ensembles}), donc des éléments de $\mathbb{P}[i]$.

\end{document}

% Lien vers le schéma du cicruit :
% https://tikzcd.yichuanshen.de/#N4Igdg9gJgpgziAXAbVABwnAlgFyxMJZABgBpiBdUkANwEMAbAVxiRAB12cYAPHYAKJgcAJwCXMAAQBGAL4hZpdJlz5CKaeSq1GLNgAkFSkBmx4CRAExbq9Zq0QcuvfgGUA7nTTzFys2qIAZhsdezYADSM-VQsUABYQuz1HTm4+YFcIETwpOSiTFXN1ElJpbSSHJzT+IVEJSUsfY1MY4s0y211KyN8C-1jkaw7Q5KqXDM9vfJaioNLyrrZU8Y8vJujZ+PnOsJTndMzsrClG6cKAlDJLBd2x9NrxKUD1vtaiTWud0cNemYvkYKfEaVZYHSYvP4DBJAipLfZuLI5STPBTaGBQADm8CIoAAZiIIABbJBkEA4CBITTApBgJgMBjUBh0ABGMAYAAVzrEQAwYLicPl8UTKdRyUhrNTELT6YyWWzOf11Dy+QLekLiYgJWLEAB2L4OaUMnlyjlcpW8-kgagACxgdCgbEgYFYaoJGq1FMQwUlhtlrNNirYFtVxnVSG92oSPrpRqZ-oVb0cwcFbqQAFZRZ6AGz6mkxv3ys1BlUp4WIHNkz166My43xotJkuusvV7UADlzUvzdcLgcblubGo7laQAE5O76ewHE8qB6HU4hpKTtdIqbCu7W472Z8nB5SqSuJevJ1vp5tZyG8QvpB6kMPj93Twnz8mbXaHY4nS752Wb5nKd6D6biaz4XBeqKyEAA
